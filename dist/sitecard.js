!function(){"use strict";function t(){var t,e;return t=this.createShadowRoot(),e=document.importNode(a.content,!0),t.appendChild(e),this.update(),this.updatePublishDate(),this}function e(){var t=this.getAttribute("published-date"),e=this.shadowRoot.querySelector(".published-date");e.textContent=t&&moment?moment(t).format("LL"):""}function r(){function t(){var t,i=r.getAttribute("url"),n="GET",o=!0;if("undefined"!=typeof i&&0===i.toString.indexOf("http"))return e&&0!==e.readyState&&4!==e.readyState&&e.abort(),t="https://www.srytk.com/a/sitemeta/sitemeta.json",t+="?url="+encodeURIComponent(i),e=new XMLHttpRequest,e.open(n,t,o),new Promise(function(t,r){e.onload=function(){200==e.status?t(e.responseText):r(e.statusText)},e.onerror=function(){r("network error")},e.send()}).then(function(t){return JSON.parse(t)}).then(function(t){var e,i,n,o,a=t.meta,c=document.createElement("a"),u={},s=r.shadowRoot;e=a["og:image"]?a["og:image"]:a["twitter:image"]?a["twitter:image"]:"https://i.imgur.com/DReqqAW.png",n=a["og:title"]?a["og:title"]:a["twitter:title"]?a["twitter:title"]:t.title?t.title:"NO TITLE",o=a["og:description"]?a["og:description"]:a["twitter:description"]?a["twitter:description"]:a.description?a.description:"",i=a["og:url"]?a["og:url"]:a["twitter:url"]?a["twitter:url"]:r.getAttribute("url"),u.img=s.querySelector(".image-container img"),u.img.setAttribute("data-src",e),u.title=s.querySelector(".site-title .site-link"),u.title.textContent=n,u.description=s.querySelector(".description"),u.description.textContent=o,u.links=s.querySelectorAll("a.site-link");for(var l=0,d=u.links.length;d>l;++l)u.links[l].setAttribute("href",i);c.href=r.getAttribute("url"),u.favicon=s.querySelector(".favicon"),u.favicon.setAttribute("src","https://www.google.com/s2/favicons?domain="+c.host),u.netLocation=s.querySelector(".net-location"),u.netLocation.textContent="- "+c.host}).then(function(t){return e.onload=null,e.onerror=null,t})["catch"](function(t){console.log("error",t),r.setAttribute("hidden","hidden")})}var e,r=this;return t()}function i(t,e,r){switch(t){case"published-date":this.updatePublishDate();break;case"url":this.update()}}var n,o=(document._currentScript||document.currentScript).ownerDocument,a=o.querySelector("template"),c=Object.create(HTMLElement.prototype);c.createdCallback=t,c.attributeChangedCallback=i,c.update=r,c.updatePublishDate=e;try{n=document.registerElement("site-card",{prototype:c})}catch(u){return void console.warn("<site-card>は既に登録されています。")}}();