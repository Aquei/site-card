!function(){"use strict";function t(){var t,e;return t=this.createShadowRoot(),e=document.importNode(n.content,!0),t.appendChild(e),this.update(),this}function e(){function t(){var t,o=r.getAttribute("url"),n="GET",i=!0;if("undefined"!=typeof o)return e&&0!==e.readyState&&4!==e.readyState&&e.abort(),t="https://www.srytk.com/a/sitemeta/sitemeta.json",t+="?url="+encodeURIComponent(o),e=new XMLHttpRequest,e.open(n,t,i),new Promise(function(t,r){e.onload=function(){200==e.status?t(e.responseText):r(e.statusText)},e.onerror=function(){r("network error")},e.send()}).then(function(t){return JSON.parse(t)}).then(function(t){var e,o,n,i,c,a=t.meta,u=document.createElement("a"),s={},l=r.shadowRoot;e=a["og:image"]?a["og:image"]:a["twitter:image"]?a["twitter:image"]:"https://pixabay.com/static/uploads/photo/2012/04/10/23/44/question-27106_640.png",n=a["og:title"]?a["og:title"]:a["twitter:title"]?a["twitter:title"]:t.title?t.title:"NO TITLE",i=a["og:description"]?a["og:description"]:a["twitter:description"]?a["twitter:description"]:a.description?a.description:"",o=a["og:url"]?a["og:url"]:a["twitter:url"]?a["twitter:url"]:r.getAttribute("url"),c=r.getAttribute("published-date"),s.img=l.querySelector(".image-container img"),s.img.setAttribute("data-src",e),s.title=l.querySelector(".site-title .site-link"),s.title.textContent=n,s.description=l.querySelector(".description"),s.description.textContent=i,s.links=l.querySelectorAll("a.site-link");for(var d=0,p=s.links.length;p>d;++d)s.links[d].setAttribute("href",o);c&&(s.publishedDate=l.querySelector(".published-date"),s.publishedDate.textContent=moment(c).format("LL")),u.href=r.getAttribute("url"),s.favicon=l.querySelector(".favicon"),s.favicon.setAttribute("src","https://www.google.com/s2/favicons?domain="+u.host),s.netLocation=l.querySelector(".net-location"),s.netLocation.textContent="- "+u.host}).then(function(t){return e.onload=null,e.onerror=null,t})["catch"](function(t){console.log("error",t),r.setAttribute("hidden","hidden")})}var e,r=this;return t()}var r,o=(document._currentScript||document.currentScript).ownerDocument,n=o.querySelector("template"),i=Object.create(HTMLElement.prototype);i.createdCallback=t,i.update=e;try{r=document.registerElement("site-card",{prototype:i})}catch(c){return void console.warn("<site-card>は既に登録されています。")}}();